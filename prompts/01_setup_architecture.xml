<?xml version="1.0" encoding="UTF-8"?>
<prompt>
  <metadata>
    <title>Setup Architecture &amp; Infrastructure - Hugo Automotriz</title>
    <phase>1</phase>
    <difficulty>medium</difficulty>
    <estimated_time>45-60 minutes</estimated_time>
    <version>1.0</version>
    <last_updated>2025-11-19</last_updated>
    
    <prerequisites>
      <prerequisite>Node.js 18+ installed</prerequisite>
      <prerequisite>Vercel CLI installed</prerequisite>
      <prerequisite>NeonDB account and connection string</prerequisite>
    </prerequisites>
  </metadata>

  <thinking_configuration>
    <claude_extended_thinking>
      <enabled>true</enabled>
      <reasoning>
        This task involves setting up the foundational architecture for a scalable web application. 
        Decisions made here regarding folder structure, database ORM configuration, and UI library integration 
        will impact the entire development lifecycle.
      </reasoning>
      <budget_tokens>10000</budget_tokens>
      <expected_thinking_depth>
        Analyze the best folder structure for a Next.js App Router project with Shadcn UI and Drizzle ORM.
        Evaluate configuration options for Drizzle with NeonDB (serverless driver).
      </expected_thinking_depth>
    </claude_extended_thinking>
  </thinking_configuration>

  <context>
    <project_info>
      <name>Hugo Automotriz</name>
      <framework>Next.js 15 (App Router)</framework>
      <status>New Project</status>
    </project_info>

    <tech_stack>
      <frontend>Next.js, Tailwind CSS, Shadcn UI, Lucide React</frontend>
      <backend>Next.js Server Actions</backend>
      <database>NeonDB (PostgreSQL), Drizzle ORM</database>
      <deployment>Vercel</deployment>
    </tech_stack>

    <objective>
      <primary>
        Initialize the "Hugo Automotriz" project with a robust architecture. 
        This includes setting up Next.js with TypeScript, configuring Tailwind CSS and Shadcn UI for the design system, 
        and establishing the database connection layer using Drizzle ORM with NeonDB.
        **CRITICAL**: The application must be 100% in Spanish and tailored for the Bolivian market.
      </primary>
      <success_criteria>
        <criterion>✅ Next.js project created and running locally without errors</criterion>
        <criterion>✅ Root layout configured with `lang="es"`</criterion>
        <criterion>✅ Shadcn UI configured with a custom theme (modern, premium feel)</criterion>
        <criterion>✅ Drizzle ORM connected to NeonDB and able to run migrations</criterion>
        <criterion>✅ Project folder structure organized for scalability</criterion>
      </success_criteria>
    </objective>
  </context>

  <instructions>
    <step number="1">
      <title>Initialize Next.js Project</title>
      <thinking_guidance>
        Determine the optimal flags for creating a new Next.js app (TypeScript, Tailwind, ESLint, App Router).
        Consider the project name and directory.
      </thinking_guidance>
      <commands>
        <![CDATA[
npx create-next-app@latest hugo-automotriz --typescript --tailwind --eslint --app --src-dir --import-alias "@/*"
cd hugo-automotriz
        ]]>
      </commands>
      <action>
        Modify `src/app/layout.tsx` to set `<html lang="es">`.
        Update metadata title/description to be in Spanish (e.g., "Hugo Automotriz - Asistencia y Talleres en Bolivia").
      </action>
    </step>

    <step number="2">
      <title>Configure Shadcn UI &amp; Design System</title>
      <thinking_guidance>
        Plan the design system setup. We need a premium, modern look.
        Select appropriate colors (e.g., Slate/Zinc for neutral, a vibrant primary color).
        Ensure `components.json` is configured correctly for the `@/components` alias.
      </thinking_guidance>
      <commands>
        <![CDATA[
npx shadcn@latest init
# Select "New York" style, "Zinc" base color, and yes for CSS variables.
        ]]>
      </commands>
      <action>
        Update `app/globals.css` to refine the color palette for a "premium automotive" feel (deep blues/grays, vibrant accents).
        Install core components: button, input, card, dialog, dropdown-menu, toast, avatar.
      </action>
      <commands>
        <![CDATA[
npx shadcn@latest add button input card dialog dropdown-menu toast avatar sheet
        ]]>
      </commands>
    </step>

    <step number="3">
      <title>Setup Database Layer (NeonDB + Drizzle)</title>
      <thinking_guidance>
        Analyze the requirements for Drizzle ORM with Neon serverless driver.
        We need `drizzle-orm`, `drizzle-kit`, and `@neondatabase/serverless`.
        Structure the db folder to separate schema, connection, and migrations.
      </thinking_guidance>
      <commands>
        <![CDATA[
npm install drizzle-orm @neondatabase/serverless dotenv
npm install -D drizzle-kit
        ]]>
      </commands>
      <action>
        1. Create `src/db/index.ts` to export the db instance.
        2. Create `src/db/schema.ts` (empty for now, or basic example).
        3. Create `drizzle.config.ts` at root.
        4. Create `.env.local` with `DATABASE_URL`.
      </action>
    </step>

    <step number="4">
      <title>Organize Folder Structure</title>
      <thinking_guidance>
        Design a folder structure that supports the features: Auth, Assistance, Workshops, Dashboard.
        Use feature-based grouping or standard Next.js patterns.
      </thinking_guidance>
      <action>
        Create the following directory structure:
        - `src/components/ui` (Shadcn)
        - `src/components/shared` (Reusable app components)
        - `src/lib` (Utils, constants)
        - `src/actions` (Server Actions)
        - `src/hooks` (Custom hooks)
        - `src/types` (Global types)
      </action>
    </step>
  </instructions>

  <validation>
    <execution_checklist>
      <item>✅ `npm run dev` starts the server successfully</item>
      <item>✅ Shadcn components render correctly with the custom theme</item>
      <item>✅ `npx drizzle-kit push` (or generate) runs without config errors</item>
      <item>✅ Folder structure matches the plan</item>
    </execution_checklist>
  </validation>

  <output_format>
    <structure>
      <section name="execution_log">Log of commands run and files created</section>
      <section name="verification">Status of the dev server and db connection</section>
    </structure>
    <format>Markdown</format>
  </output_format>
</prompt>
