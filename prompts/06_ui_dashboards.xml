<?xml version="1.0" encoding="UTF-8"?>
<prompt>
  <metadata>
    <title>UI Implementation - Dashboards</title>
    <phase>6</phase>
    <difficulty>medium</difficulty>
    <estimated_time>60-90 minutes</estimated_time>
    <version>1.0</version>
    <last_updated>2025-11-19</last_updated>
    
    <prerequisites>
      <prerequisite>05_ui_workshop_booking.xml completed</prerequisite>
      <prerequisite>Recharts installed (for analytics)</prerequisite>
    </prerequisites>
  </metadata>

  <thinking_configuration>
    <claude_extended_thinking>
      <enabled>true</enabled>
      <reasoning>
        Dashboards are where users spend most of their time managing their data.
        We need distinct views for Drivers (User) and Workshops (Admin-lite).
        Data visualization is key for the Workshop dashboard (revenue, appointments).
      </reasoning>
      <budget_tokens>10000</budget_tokens>
      <expected_thinking_depth>
        Design the layout for the dashboard (Sidebar navigation vs Top nav).
        Plan the data fetching strategy (Server Components vs Client Components for real-time data).
      </expected_thinking_depth>
    </claude_extended_thinking>
  </thinking_configuration>

  <context>
    <project_info>
      <name>Hugo Automotriz</name>
      <framework>Next.js 15</framework>
    </project_info>

    <objective>
      <primary>
        Build the Dashboard interfaces for both Drivers and Workshop Owners.
        - Drivers: Manage vehicles, view history.
        - Workshops: Manage appointments, view earnings, update services.
        **Language**: Spanish.
      </primary>
      <success_criteria>
        <criterion>✅ Driver dashboard shows vehicle list and history</criterion>
        <criterion>✅ Workshop dashboard shows appointment calendar</criterion>
        <criterion>✅ Charts render correctly for workshop analytics</criterion>
        <criterion>✅ UI text is in Spanish</criterion>
      </success_criteria>
    </objective>
  </context>

  <instructions>
    <step number="1">
      <title>Create Dashboard Layout</title>
      <thinking_guidance>
        Create a shared layout `src/app/dashboard/layout.tsx`.
        Include a Sidebar with navigation links based on the user's role.
        - Driver: Inicio, Mis Vehículos, Historial, Configuración.
        - Workshop: Resumen, Calendario, Servicios, Reportes, Configuración.
      </thinking_guidance>
      <action>
        Implement the Sidebar component using Shadcn `Sheet` (mobile) and fixed aside (desktop).
      </action>
    </step>

    <step number="2">
      <title>Implement Driver Dashboard</title>
      <thinking_guidance>
        Page: `src/app/dashboard/driver/page.tsx`.
        - "Mis Vehículos" card: List vehicles, add new one.
        - "Próximas Citas": List next bookings.
        - "Asistencias Recientes": History of emergency requests.
      </thinking_guidance>
      <action>
        Create the components and assemble the page.
        Implement "Add Vehicle" modal.
      </action>
    </step>

    <step number="3">
      <title>Implement Workshop Dashboard - Overview</title>
      <thinking_guidance>
        Page: `src/app/dashboard/workshop/page.tsx`.
        - Stats Cards: Total Revenue, Appointments Today, Rating.
        - Recent Activity table.
        - Chart: Revenue over time (use `recharts`).
      </thinking_guidance>
      <commands>
        <![CDATA[
npm install recharts
npx shadcn@latest add table tabs scroll-area
        ]]>
      </commands>
      <action>
        Create `StatsCard.tsx` and `RevenueChart.tsx`.
      </action>
    </step>

    <step number="4">
      <title>Implement Workshop Calendar</title>
      <thinking_guidance>
        Page: `src/app/dashboard/workshop/calendar/page.tsx`.
        A full-calendar view of appointments.
        Clicking an event opens details (Customer info, Vehicle, Service).
      </thinking_guidance>
      <action>
        Implement a calendar view (can use `react-big-calendar` or custom Shadcn implementation).
        For MVP, a list view grouped by day might be easier and cleaner.
      </action>
    </step>
  </instructions>

  <validation>
    <execution_checklist>
      <item>✅ Sidebar navigation works and is responsive</item>
      <item>✅ Driver can add a vehicle</item>
      <item>✅ Workshop stats display correct data (mocked or real)</item>
    </execution_checklist>
  </validation>

  <output_format>
    <structure>
      <section name="dashboard_preview">Screenshots or description of the dashboard</section>
    </structure>
    <format>Markdown</format>
  </output_format>
</prompt>
